# user nginx;
worker_processes auto;

events {
  worker_connections 768;
}

http {
  sendfile off;
  tcp_nopush on;
  tcp_nodelay on;
  types_hash_max_size 2048;

  keepalive_timeout 65;

  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_prefer_server_ciphers on;

  gzip on;
  gzip_disable "msie6";

  map $http_upgrade $connection_upgrade {
    default upgrade;
    '' close;
  }

    server {
        listen       80;
        server_name  alpha.moloch.gg;

        location ^~ /api {
          #  rewrite /api/(.*) /$1  break;
          proxy_set_header X-Real-IP       $remote_addr;
          proxy_set_header X-ForwFarded-For $proxy_add_x_forwarded_for;
          proxy_pass http://tipster-server:3001;
        }

        location / {
            proxy_pass http://tipster-client:3000;
            #add_header Cache-Control no-cache;
            #expires 1s;
        }
    }
}
